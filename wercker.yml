box: wercker/php
build:
  steps:
    - script:
        name: .bashrc
        code: cat $HOME/.bashrc
    - script:
        name: exports
        code: export
    - script:
        name: source .bashrc
        code: source $HOME/.bashrc
    - script:
        name: exports
        code: export
    - script:
        name: shell
        code: echo $0
    - script:
        name: List available PHP versions
        code: |-
            phpenv version
            phpenv versions
    - script:
        name: List available tools
        code: |-
            phpunit -version
            composer --version
            pear version
            pyrus version
            phpenv -v
            atoum -v
    - script:
        name: install dependencies
        code: |-
            composer install
    - script:
        name: Serve application
        code: php -S localhost:8000 >> /dev/null &
    - script:
        name: PHPUnit integration tests
        code: phpunit --configuration phpunit.xml
